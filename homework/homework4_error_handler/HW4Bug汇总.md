# HW4错误处理踩坑&bug汇总

在本次作业中我遇到了比较零碎的各种问题，在这里汇总一下。

## UnaryExp 处理J类错误

在UnaryExp中的`Ident '(' [FuncRParams] ')'`定义分析，我对于有参数和没有参数分开处理，因此在处理右括号丢失时仅考虑了无参数，有参数时忘记考虑了，导致testfile10 WA 80%。

## 进入Block时创建新的SymbolTable

在进入一个Block或函数时，就应当新建一个SymbolTable，这样才能正确的处理名字重命名等问题。

## 函数形参

在FuncDef的语法分析中要注意，一旦函数的形参表解析完毕，就应当加入符号表中，然后再进入Block的语法分析过程。这里主要注意先后顺序。

## 实参维数

对于e类错误，需要分析维数是否匹配。一种可行的办法是，在`Decl`解析时即将维数信息保存在符号表中，后续查表是可以得到标识符在符号表中的维数；另外，对于声明`int arr[1][1]`和调用`func(arr[1])`这种情形而言，还需要用标识符在符号表中的维数减去该表达式中括号层数来得到该实参整体的维数。

## 做回归测试

对于多数RE和部分WA，有可能是新代码的逻辑不够完善，使得某些正确样例没有正确执行，这个时候可以利用语法辅助库进行回归测试，实现上就是将错误输出和正确输出都打印到`output.txt`，如果程序没有问题那么应当AC。