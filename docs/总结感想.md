<h1>
    <div align = "center">《编译技术》实验</div>
</h1>
<h1>
    <div align = "center">总结感想</div>
</h1>




<h2>
    <div align = "center"></div>
</h2>




























<h5>
    <div align = "center"></div>
</h5>













<h6>
    <div align = "center">2022年12月</div>
</h6>
<div STYLE="page-break-after: always;"></div>



## 一、感受

本学期的编译技术实验是我大学以来单独工程量最大的项目，最终版本1.5w行代码，213个源文件，近300次commit，投入的时间和精力也可以说是大量了。

在这个过程中，我首先感受到的是及时开展项目。本学期实际上课业压力并不轻松，而且我选了四门一般专业课，平时的时间还是比较紧的。正是在这种情况下，提早开展任务才更为重要，特别是代码生成一，花费了我大量的时间，在最后一题才通过正式测试，非常惊险。若可以更早安排和推进，或许会更游刃有余一些。

然后是分模块开发。本次编译器实验实际上是一个大型面向对象工程，合理的解耦与接口定义等十分重要。幸运的是，课程组依时间顺序打开的词法分析、语法分析等部分已经指明了工作方向，要十分注意解耦，避免无谓的麻烦。

接着是设计优于实现。在我看来，设计就是一种写代码的过程，只不过忽略了很多“搬砖”的细节。如果能够在设计文档中详略得当地列出开发目标和方向，那么离实现就不远了。

然后是接口定义与前后端通信。编译器可以大致分为前端和后端，分别有词法分析和语法分析以及语义分析和代码生成等工作，如何让这两者高效沟通十分重要。举例而言，在代码生成时，通行的做法是对前端生成的语法树遍历并建表填表查表，这也就要求前端语法分析结束时留下了结构清晰且包含必要信息的语法树。当然，接口的定义也不是一蹴而就的，可能需要多次小范围的推倒重来，但是若设计之初便留心于此，应该不会太耗费时间精力。

接着是面向对象。在大二下学期的面向对象课程中，我们学习了许多开发模式以及Java的语法特性，而编译器的实验恰好就是将学到的知识应用于工程开发的好机会，充分合理地利用OO所学知识将大有裨益（特别是对我这种没有什么C++水平的同学而言）。

然后是选择合适的赛道。不是每个人都需要卷到竞速榜top的，也不是所有人都需要选择mips赛道，应当在开始就明确自己的目标和定位以及本学期的学业压力，见到身边有一些同学既选了不少专业课，又要去竞速，最后反而在临ddl时才做完了正确性甚至正确性都没有完全保证，实在是有些得不偿失。

接着是合适的开发工具。我主要使用了IDEA+Git+GitHub进行开发和管理，其中git十分有用，不仅可以记录每一次提交以方便遇到错误时回滚，更可以强迫自己每写完一个部分就用尽可能简练清晰的语言进行归纳汇总从而commit，这对理清思路十分重要。

然后是合适的代码与文档习惯。对我个人而言，我会在代码前进行设计和文档的撰写，并在代码实现过程中进行文档的修正，同时代码中也会保留很多注释。经验证明这对开发十分有效，后续debug也十分便利。

## 二、建议

- 代码生成一难度较大可以给出更多时间以及在前期多次push同学们尽早开工。身边有不少同学绊倒在代码生成一上，原因就是对其难度重视不够。
- 给出更多LLVM IR的参考资料。本学期第一次开设LLVM IR赛道，这是个十分不错的变化，我也采用了LLVM IR作为中间代码。然而，LLVM IR和Mips仍有较大距离，而且网络上关于其的资料良莠不齐，课程组可以针对课程实验修订更完善的LLVM IR指导手册。
- LLVM IR赛道分值提升。在代码生成中，我为了生成LLVM IR付出了较大的时间精力成本，要大于自己设计四元式的成本，其难度特别是数组等方面并不小，课程组可以酌情提升LLVM IR赛道的分数上限为90乃至95分，吸引更多同学选择该赛道。

## 三、寄语

本学期的编译器实验我收获颇多，感想也颇多，在这里留下一点对学弟学妹的寄语：

1. 早开发！早开发！早开发！重要的事情说三遍，大三上的课业量并不比大二轻松
2. 设计优于实现，文档优于代码，合适的设计可以避免重构
3. 选择合适的赛道，不是每个人都适合MIPS竞速
4. 使用git进行版本管理
5. 使用checkstyle约束自己的代码风格
6. 多和老师、助教、同学沟通，避免无谓的时间浪费
